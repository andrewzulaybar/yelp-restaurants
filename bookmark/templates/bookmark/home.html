{% extends "bookmark/base.html" %}
{% load staticfiles %}

<!-- Content -->
{% block content %}
    {% for restaurant in restaurants %}
        <!-- Card -->
        <div class="card mb-3">
            {% if restaurant.image_url %}
                <img class="card-image-top" src="{{ restaurant.image_url }}">
            {% endif %}
            <!-- Card body -->
            <div class="card-body">
                {% block close_button %}{% endblock close_button %}
                <h5 class="card-title">{{ restaurant.name }}</h5>
                <h6 class="card-subtitle">
                    {% with restaurant.location.address1 as address %}
                    {% with restaurant.categories.0.title as category %}
                    {% with restaurant.price as price %}
                        {{ address }}
                        {% if address and category or address and price %}
                            &#8226;
                        {% endif %}
                        {{ category }}
                        {% if category and price %}
                            &#8226;
                        {% endif %}
                        {{ restaurant.price }}
                    {% endwith %}
                    {% endwith %}
                    {% endwith %}
                </h6>
            </div>
            <!-- Card footer -->
            {% block footer %}
            <div class="card-footer p-0">
                <!-- Bookmark form -->
                <form action="{% url 'add-to-bookmarks' %}" method="post">
                    {% csrf_token %}
                    <input type="hidden" name="name" value="{{ restaurant.name }}">
                    <input type="hidden" name="business_id" value="{{ restaurant.id }}">
                    <input type="hidden" name="visited" value="False">
                    <input type="hidden" name="bookmark" value="True">
                    {% block bookmark_button %}
                        <input type="submit" class="btn-sm btn-primary float-left"  id="home-page-bookmark" value="Bookmark">
                    {% endblock bookmark_button %}
                </form>
                <!-- Visited form -->
                <form action="{% url 'add-to-visited' %}" method="post">
                    {% csrf_token %}
                    <input type="hidden" name="name" value="{{ restaurant.name }}">
                    <input type="hidden" name="business_id" value="{{ restaurant.id }}">
                    <input type="hidden" name="visited" value="True">
                    <input type="hidden" name="bookmark" value="False">
                    {% block visited_button %}
                        <input type="submit" class="btn-sm btn-primary float-right" id="home-page-visited" value="Visited">
                    {% endblock visited_button %}
                </form>
            </div>
            {% endblock footer %}
        </div>
    {% endfor %}
{% endblock content %}